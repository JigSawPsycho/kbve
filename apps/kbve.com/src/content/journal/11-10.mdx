---
title: 'November: 10th'
category: Daily
date: 2024-11-10 12:00:00
client: Self
unsplash: 1721332154373-17e78d19b4a4
img: https://images.unsplash.com/photo-1721332154373-17e78d19b4a4?crop=entropy&cs=srgb&fm=jpg&ixid=MnwzNjM5Nzd8MHwxfHJhbmRvbXx8fHx8fHx8fDE2ODE3NDg2ODY&ixlib=rb-4.0.3&q=85
description: November 10th.
tags:
    - daily
---

import { Adsense, Tasks } from '@kbve/astropad';

## 2024

-   07:13AM

    **Nx Update**

    Updated the monorepo to nx v20.0.12.
    Also moved up the build process to see where the main branch fails, hopefully we can address that problem tonight.

    **Main**

    The branch seems to build without any major issues, but it did skip a couple libraries from being built.
    What we could do is try to maybe start changing the triggers to be all via readme updates?
    Hmm, I will have to think through it again, let me get some coffee and revisit this concept again within the next hour.

    **Package**

    I am going to go through the package again and see if there are any libraries that we need to update or remove.
    We are no longer supporting `appwrite`, so lets go ahead and remove that one.
    I believe we can also drop the `preact` libraries as well.
    `"@astrojs/preact": "^3.5.3"` and `preact` both could be removed.

-   07:30AM

    **Vue**

    We can take out the `vue` package as well, following the same command from the `preact` earlier.
    ```shell
    pnpm remove @astrojs/vue vue
    ```

    However I will run those later when I get back to the monorepo.
    After we run that, we will need to make sure to clean up the cache.
    
    ```shell
    pnpm nx reset
    ```

-   08:53AM

    **Unity**

    I grabbed the ERW tilesets from Matos and threw them into the `Rareicon` asset folder.
    With the generic collection of tilesets, we should have enough to build a couple generic maps.
    Now the bigger question would be to figure out how to get the hang of the animation.

    **Supabase**

    While making changes to the Unity configuration, I can spend some time thinking through the changes that I want to do with the `user_cards`.
    One of the goals for the user cards after this base update will be to pull the stats from the character sheet and render them.
    We want the goal of the card to contain all the public information that a random guest or user would require.
    So lets take abit of a step back and review the psql for it.

    We will keep parts of the table, like the `CONSTRAINT` for the function, example:

    ```sql

    CONSTRAINT bio_length CHECK (char_length(bio) <= 255), -- Limit bio length to 255 characters
    CONSTRAINT bio_format CHECK (bio ~ '^[a-zA-Z0-9.!? ]*$'), -- Allow alphanumeric characters, spaces, and basic punctuation

    ```

    Okay, yet the `JSONB` needs to be adjusted within the function because it does not let specific nulls through, like if the user has a github but not a twitter.
    
    Wait I am a tart, I can just drop these functions and use the row level security to handle the updating and managing of the table.
    Thus the PSQL will make this so much easier to manage in the future, yay!
    Okay so we will just run these and move forward with the current project.
    
    ```sql

    BEGIN;

    --  Drop older trigger and function
    DROP TRIGGER IF EXISTS on_auth_new_card_created ON auth.users;
    DROP FUNCTION IF EXISTS public.handle_user_card_update();
    DROP FUNCTION IF EXISTS public.handle_new_user_card();
    DROP TRIGGER IF EXISTS handle_user_card_update ON public.user_cards;

    COMMIT;

    ```

    Then we can update the command to just handle these directly for us.
    Oh I made another silly mistake, I have to drop the triggers first then the functions!
    Let me go ahead and fix that up really quick.